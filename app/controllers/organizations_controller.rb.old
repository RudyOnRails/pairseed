class OrganizationsController < ApplicationController
  def show
    @organization = Organization.find(params[:id])
    @pair_topics = @organization.member_pair_topics.paginate(:page => params[:page], :per_page => 10)
    @members = @organization.members
    # @json = @pair_topics.to_gmaps4rails
    # @markers = @pair_topics.to_gmaps4rails    #@markers contain valid json to pass to the view


    # @json = @pair_topics.to_gmaps4rails do |pair_topic, marker|
    #   marker.json({ :id => pair_topic.id, :title => pair_topic.title })
    # end

    @json = @pair_topics.to_gmaps4rails do |pair_topic, marker|
      marker.infowindow render_to_string(:partial => "/pair_topics/gmaps_marker", :locals => { :object => pair_topic})
      marker.picture({
                      :picture => "assets/favicon.ico",
                      :width   => 32,
                      :height  => 32
                     })
      # marker.title   "i'm the title"
      # marker.sidebar "i'm the sidebar"
      marker.json({ :id => pair_topic.id, :title => pair_topic.title })
    end

  end
end